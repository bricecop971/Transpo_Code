<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transpositeur IA Pro</title>
    <link rel="stylesheet" href="style.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/abcjs/6.2.2/abcjs-basic-min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/abcjs/6.2.2/abcjs-audio.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
    <script>pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js';</script>

    <style>
        .abcjs-css-warning { display: none !important; }
        
        .upload-zone { margin: 20px auto; padding: 40px; border: 2px dashed #00e5ff; border-radius: 10px; width: 80%; background: rgba(0, 229, 255, 0.05); color: white; text-align: center; cursor: pointer; }
        
        /* STYLE DU DASHBOARD (Les cases que le JS cherche !) */
        .dashboard {
            display: none; /* Cach√© au d√©but */
            grid-template-columns: 1fr 1fr 1fr;
            gap: 10px;
            margin: 20px auto;
            width: 80%;
        }
        .dash-card {
            background: #222;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #444;
            text-align: left;
        }
        .dash-card label { display: block; font-size: 11px; color: #888; margin-bottom: 5px; text-transform: uppercase; letter-spacing: 1px; }
        .dash-card input { width: 100%; background: transparent; border: none; color: #00e5ff; font-weight: bold; font-size: 16px; outline: none; }

        /* Lecteur Audio */
        .abcjs-inline-audio { background: #222; border: 1px solid #444; border-radius: 6px; margin-top: 10px; padding: 5px; display: flex; justify-content: center; }
        .abcjs-btn { background: #00e5ff; color: #000; border-radius: 4px; padding: 2px 8px; margin: 0 5px; cursor: pointer; border: none; }
    </style>
</head>
<body style="background:#121212; color:white; font-family:sans-serif; text-align:center;">

    <header style="margin-top:20px;">
        <h1>üéº Smart Transpose</h1>
    </header>

    <main>
        <div class="upload-zone">
            <p id="upload-text">üì∏ D√©posez votre partition (Image/PDF)</p>
            <input type="file" id="partition-upload" accept="image/*,.pdf" style="display:none;">
            <button onclick="document.getElementById('partition-upload').click()" style="margin-top:10px; padding:10px 20px; background:#00e5ff; border:none; border-radius:5px; font-weight:bold; cursor:pointer;">Choisir un fichier</button>
        </div>

        <div id="dashboard" class="dashboard">
            <div class="dash-card">
                <label>TITRE</label>
                <input type="text" id="meta-title" placeholder="Inconnu">
            </div>
            <div class="dash-card">
                <label>MESURE</label>
                <input type="text" id="meta-meter" placeholder="4/4">
            </div>
            <div class="dash-card">
                <label>TONALIT√â</label>
                <input type="text" id="meta-key" placeholder="C">
            </div>
        </div>

        <div class="options-container" style="margin: 20px;">
            <label>Transposer vers : </label>
            <select id="transposition" style="padding:10px; border-radius:5px; background:#333; color:white; border:1px solid #555;">
                <option value="Eb">Saxophone Alto (Mi b√©mol)</option>
                <option value="Bb">Trompette / Clarinette (Si b√©mol)</option>
                <option value="F">Cor (Fa)</option>
                <option value="C" selected>Piano / Fl√ªte (Original)</option>
            </select>
        </div>

        <button id="transpose-btn" style="padding:15px 30px; font-size:18px; background:#00e5ff; border:none; border-radius:30px; cursor:pointer; font-weight:bold; box-shadow: 0 0 15px rgba(0,229,255,0.4);">‚ú® Transposer maintenant</button>

        <div id="result-zone" style="display:none; margin-top:30px;">
            <h2 id="final-title">R√©sultat</h2>
            <div id="audio"></div>
            <div id="paper" style="background:white; padding:10px; margin:20px auto; width:90%; overflow-x:auto; border-radius:5px;"></div>
            <button onclick="window.print()" style="padding:10px 20px; background:#333; color:white; border:none; border-radius:5px; cursor:pointer;">üñ®Ô∏è Imprimer / PDF</button>
            <button onclick="window.location.reload()" style="padding:10px 20px; background:#d32f2f; color:white; border:none; border-radius:5px; cursor:pointer; margin-left:10px;">üîÑ Nouveau</button>
        </div>
    </main>

    <script src="script.js"></script>
</body>
</html>
